<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Masajes con Nury — Reservas</title>
  <meta name="description" content="Masajes con Nury: reserva online tipo calendario. Servicios, galería y contacto." />

  <!-- Fonts (elegante, como tu referencia) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Inter:wght@500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0b1024;
      --muted:#5b6072;

      /* Paleta estilo “Blissaura” */
      --pinkA:#f7a6c2;
      --pinkB:#f2b5c8;
      --card:#ffffff;

      --stroke: rgba(11,16,36,.10);
      --shadow: 0 18px 55px rgba(11,16,36,.14);
      --shadow2: 0 10px 28px rgba(11,16,36,.10);

      --radius: 22px;
      --radius2: 28px;
      --max: 1120px;

      --black:#0b0b10;
      --accent:#ff4fa3;
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:#fff;
      color: var(--ink);
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:0 18px;}
    main{padding: 22px 0 56px;}

    /* ===== BACKDROP ===== */
    .page-bg{
      background: linear-gradient(180deg, var(--pinkA), var(--pinkB));
      padding: 24px 0 56px;
    }
    .shell{
      width:min(1200px, calc(100% - 28px));
      margin:0 auto;
      border-radius: 28px;
      background: var(--card);
      box-shadow: var(--shadow);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.55);
    }

    /* ===== TOP BAR (como tu imagen) ===== */
    #topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding: 16px 18px;
      border-bottom: 1px solid rgba(11,16,36,.10);
      background:#fff;
    }

    .menu-pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background:#fff;
      border: 1px solid rgba(11,16,36,.15);
      font-weight: 900;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 8px 18px rgba(11,16,36,.06);
    }
    .menu-pill .bars{
      width:16px;height:12px; position:relative; display:inline-block;
    }
    .menu-pill .bars:before,
    .menu-pill .bars:after,
    .menu-pill .bars i{
      content:"";
      position:absolute; left:0; right:0;
      height:2px; border-radius:2px;
      background:#111;
      opacity:.85;
    }
    .menu-pill .bars:before{top:0}
    .menu-pill .bars i{top:5px}
    .menu-pill .bars:after{bottom:0}

    .brand{
      font-family: "DM Serif Display", serif;
      font-size: 22px;
      letter-spacing:.01em;
      color: #111;
      white-space:nowrap;
    }

    .nav-links{
      display:flex;
      gap: 26px;
      align-items:center;
      font-weight: 800;
      font-size: 12px;
      letter-spacing:.22em;
      color:#2d2f37;
      text-transform: uppercase;
      white-space:nowrap;
    }
    .nav-links a{opacity:.85}
    .nav-links a:hover{opacity:1}

    .top-actions{
      display:flex;
      align-items:center;
      gap: 10px;
      white-space:nowrap;
    }

    .lang-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(11,16,36,.15);
      background:#fff;
      font-weight: 900;
      font-size: 12px;
      cursor:pointer;
      user-select:none;
    }
    .lang-pill span{opacity:.55}
    .lang-pill strong{opacity:1}

    .book-btn{
      padding: 11px 18px;
      border-radius: 999px;
      background: #0b0b10;
      color:#fff;
      border:0;
      font-weight: 900;
      cursor:pointer;
      box-shadow: 0 12px 28px rgba(0,0,0,.18);
    }
    .book-btn:hover{transform: translateY(-1px)}

    /* ===== HERO ===== */
    .hero{
      padding: 42px 18px 0;
    }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 28px;
      align-items:center;
      padding: 0 8px 24px;
    }
    @media (max-width: 980px){
      .hero-grid{grid-template-columns:1fr; padding-bottom: 8px;}
    }

    .hero h1{
      margin:0 0 12px;
      font-family:"DM Serif Display", serif;
      font-weight: 400;
      font-size: clamp(46px, 5.4vw, 88px);
      line-height: .92;
      letter-spacing:-.02em;
      color:#0b0b10;
    }
    .hero p{
      margin: 0 0 18px;
      color: #4f5566;
      font-weight: 700;
      line-height: 1.65;
      max-width: 52ch;
      font-size: 14px;
    }

    .hero-ctas{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top: 6px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 12px 16px;
      border-radius: 999px;
      border: 1px solid rgba(11,16,36,.14);
      background:#fff;
      color:#0b0b10;
      font-weight: 900;
      cursor:pointer;
      box-shadow: 0 10px 20px rgba(11,16,36,.06);
      transition: .15s transform, .15s opacity;
    }
    .btn:hover{transform: translateY(-1px)}
    .btn.dark{
      background:#0b0b10;
      color:#fff;
      border-color:#0b0b10;
      box-shadow: 0 12px 28px rgba(0,0,0,.18);
    }

    /* ✅ Eliminamos 98% y Serenity: no existe en HTML */
    .hero-left{position:relative;}

    .hero-right{
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      min-height: 360px;
    }

    .photo-blob{
      width: min(460px, 86vw);
      aspect-ratio: 1/1;
      border-radius: 999px;
      overflow:hidden;
      background: #f2f3f7;
      border: 1px solid rgba(11,16,36,.10);
      box-shadow: 0 22px 55px rgba(11,16,36,.12);
      position:relative;
    }
    .photo-blob img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .sparkle{
      position:absolute;
      right: 6%;
      top: 8%;
      width: 18px;
      height: 18px;
      opacity:.55;
    }

    /* ===== MARQUEE ===== */
    .marquee-wrap{
      background:#0b0b10;
      color:#fff;
      border-radius: 0 0 22px 22px;
      overflow:hidden;
      margin-top: 8px;
    }
    .marquee{
      display:flex;
      gap: 34px;
      align-items:center;
      white-space: nowrap;
      padding: 18px 18px;
      font-family:"DM Serif Display", serif;
      font-size: clamp(18px, 2vw, 30px);
      letter-spacing:.01em;
      animation: marquee 16s linear infinite;
    }
    .marquee span{opacity:.95}
    .marquee .star{color: var(--accent); font-family: Inter; font-weight: 1000;}
    @keyframes marquee{
      from{transform: translateX(0)}
      to{transform: translateX(-50%)}
    }

    /* ===== SECTIONS ===== */
    .section{padding: 52px 0;}
    .section h2{
      margin:0 0 8px;
      font-size: clamp(20px, 3vw, 28px);
      letter-spacing:-.02em;
      color:#0b0b10;
    }
    .section p.lead{
      margin:0 0 18px;
      color: var(--muted);
      max-width: 74ch;
      line-height:1.7;
      font-weight: 700;
      font-size: 14px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: 1fr} }

    .card{
      border: 1px solid rgba(11,16,36,.10);
      border-radius: 18px;
      background: #fff;
      box-shadow: 0 14px 34px rgba(11,16,36,.06);
      padding: 16px;
    }
    .card h3{margin:0 0 6px; font-size:16px; color:#0b0b10}
    .card p{margin:0; color:#545b6c; line-height:1.55; font-weight:700; font-size:13px}
    .tag{
      display:inline-flex;
      margin-top: 12px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(11,16,36,.10);
      background: rgba(255,79,163,.08);
      color: #0b0b10;
      font-weight: 900;
      font-size: 12px;
    }

    /* ===== Side menu (desplegable lateral) ===== */
    .sheet{
      position:fixed; inset:0;
      background: rgba(0,0,0,.30);
      display:none;
      z-index: 300;
    }
    .sheet.show{display:block}
    .sheet-panel{
      position:absolute;
      top:0;
      left:0;
      height:100%;
      width: min(360px, 88vw);
      background:#fff;
      box-shadow: 0 22px 70px rgba(11,16,36,.22);
      border-right: 1px solid rgba(11,16,36,.10);
      padding: 18px;
      transform: translateX(-102%);
      transition: .22s transform ease;
    }
    .sheet.show .sheet-panel{transform: translateX(0)}
    .sheet-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(11,16,36,.10);
      margin-bottom: 12px;
    }
    .sheet-title{
      font-family:"DM Serif Display", serif;
      font-size: 22px;
      color:#0b0b10;
    }
    .xbtn{
      width: 40px;height:40px;
      border-radius: 12px;
      border: 1px solid rgba(11,16,36,.12);
      background:#fff;
      cursor:pointer;
      font-weight: 1000;
    }
    .sheet a{
      display:block;
      padding: 14px 12px;
      border-radius: 14px;
      font-weight: 900;
      color:#2d2f37;
      border: 1px solid transparent;
    }
    .sheet a:hover{background: rgba(11,16,36,.04)}
    .sheet .sheet-actions{
      margin-top: 14px;
      display:grid;
      gap:10px;
    }

    /* ===== Calendar booking ===== */
    .booking-wrap{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width: 980px){ .booking-wrap{grid-template-columns:1fr} }

    .calendar, .booking-panel{
      border:1px solid rgba(11,16,36,.10);
      border-radius: 18px;
      background:#fff;
      box-shadow: 0 14px 34px rgba(11,16,36,.06);
      padding: 14px;
    }
    .cal-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .cal-title{font-weight: 1000; letter-spacing:-.01em;}
    .cal-nav{display:flex; gap:8px;}
    .cal-btn{
      width: 40px;height:40px;
      border-radius: 12px;
      border:1px solid rgba(11,16,36,.12);
      background:#fff;
      cursor:pointer;
      font-weight: 1000;
    }
    .cal-grid{display:grid; grid-template-columns: repeat(7, 1fr); gap: 8px;}
    .dow{
      font-size: 11px; color: #5b6072;
      font-weight: 900; text-align:center; padding: 8px 0;
    }
    .day{
      position:relative;
      aspect-ratio: 1 / 1;
      border-radius: 14px;
      border:1px solid rgba(11,16,36,.12);
      background:#fff;
      cursor:pointer;
      display:flex;
      align-items:flex-start;
      justify-content:flex-start;
      padding: 8px;
      font-weight: 900;
      color: #0b0b10;
      transition:.15s transform, .15s border, .15s background;
      user-select:none;
    }
    .day:hover{transform: translateY(-1px); border-color: rgba(255,79,163,.40); background: rgba(255,79,163,.06);}
    .day.muted{opacity:.32; cursor:not-allowed; transform:none !important;}
    .day.selected{border-color: rgba(255,79,163,.60); background: rgba(255,79,163,.12);}
    .day .dot{
      position:absolute; right:8px; bottom:8px;
      width: 8px;height:8px;border-radius:999px;
      background: var(--accent);
      display:none;
    }
    .day.has-booking .dot{display:block}

    .field{margin: 10px 0}
    .field label{
      display:block;
      font-weight: 900;
      font-size: 12px;
      color: #5b6072;
      margin-bottom: 8px;
    }
    input, select, textarea{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(11,16,36,.12);
      background:#fff;
      font-weight: 800;
      outline:none;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(255,79,163,.55);
      box-shadow: 0 0 0 4px rgba(255,79,163,.10);
    }
    textarea{min-height: 92px; resize:vertical;}
    .hint{color: #5b6072; font-weight: 700; font-size: 12px; line-height:1.5;}

    .slots{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 520px){ .slots{grid-template-columns: repeat(2, 1fr);} }
    .slot{
      padding: 12px 10px;
      border-radius: 14px;
      border:1px solid rgba(11,16,36,.12);
      background:#fff;
      cursor:pointer;
      text-align:center;
      font-weight:1000;
      color: #5b6072;
      transition:.15s transform, .15s border, .15s background, .15s color;
      user-select:none;
    }
    .slot:hover{transform: translateY(-1px); border-color: rgba(255,79,163,.40); color: #0b0b10;}
    .slot.selected{border-color: rgba(255,79,163,.60); background: rgba(255,79,163,.12); color: #0b0b10;}
    .slot[disabled]{opacity:.35; cursor:not-allowed; transform:none !important;}

    .alert, .error{
      margin-top: 10px;
      padding: 12px;
      border-radius: 16px;
      font-weight: 900;
      display:none;
    }
    .alert{
      border: 1px solid rgba(16,185,129,.30);
      background: rgba(16,185,129,.08);
      color: #065f46;
    }
    .error{
      border: 1px solid rgba(239,68,68,.25);
      background: rgba(239,68,68,.06);
      color: #7f1d1d;
    }
    .alert.show, .error.show{display:block}

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns: 1.2fr .8fr .8fr;
      gap: 14px;
    }
    @media (max-width: 980px){ .gallery{grid-template-columns:1fr} }
    .ph{
      border:1px dashed rgba(11,16,36,.22);
      border-radius: 18px;
      min-height: 220px;
      background: #fff;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding: 16px;
      color: #5b6072;
      font-weight: 900;
      box-shadow: 0 14px 34px rgba(11,16,36,.05);
    }
    .ph.small{min-height: 160px;}

    /* Footer */
    footer{
      margin-top: 34px;
      padding: 18px 0 0;
      border-top: 1px solid rgba(11,16,36,.10);
      color: #5b6072;
      font-weight: 800;
      font-size: 12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    /* ===== Cookies banner ===== */
    .cookie-banner{
      position:fixed;
      left: 14px;
      right: 14px;
      bottom: 14px;
      z-index: 400;
      display:none;
    }
    .cookie-banner.show{display:block}
    .cookie-card{
      margin:0 auto;
      width: min(980px, 100%);
      background:#fff;
      border: 1px solid rgba(11,16,36,.12);
      border-radius: 18px;
      box-shadow: var(--shadow2);
      padding: 14px;
      display:flex;
      gap: 14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .cookie-card p{
      margin:0;
      color:#4f5566;
      line-height:1.45;
      font-weight: 700;
      font-size: 13px;
      max-width: 70ch;
    }
    .cookie-actions{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
    }
    .cookie-actions .btn{box-shadow:none}
    .link{
      text-decoration: underline;
      text-underline-offset: 3px;
      font-weight: 900;
    }

    /* ===== Modal (Políticas) ===== */
    .modal{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.35);
      z-index: 500;
      display:none;
      padding: 18px;
    }
    .modal.show{display:flex}
    .modal-card{
      margin:auto;
      width: min(920px, 100%);
      max-height: min(80vh, 720px);
      background:#fff;
      border-radius: 18px;
      border: 1px solid rgba(11,16,36,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(11,16,36,.10);
    }
    .modal-title{
      font-family:"DM Serif Display", serif;
      font-size: 20px;
      color:#0b0b10;
    }
    .modal-body{
      padding: 14px 16px;
      overflow:auto;
      color:#3f4656;
      line-height:1.65;
      font-weight: 650;
      font-size: 13px;
    }
    .modal-body h3{
      margin: 14px 0 6px;
      color:#0b0b10;
      font-size: 14px;
      letter-spacing:-.01em;
    }
    .modal-body ul{margin: 6px 0 10px 18px}
    .small{
      font-size: 12px;
      opacity:.9;
      font-weight: 700;
    }

    /* ===== ✅ MOBILE RULE: solo MENU + ES/EN en la barra superior ===== */
    @media (max-width: 768px){
      /* Oculta brand, links y Book Now SOLO en móvil */
      .brand,
      .nav-links,
      .book-btn{
        display:none !important;
      }
      #topbar{
        justify-content: space-between !important;
      }
    }
  </style>
</head>

<body>
  <div class="page-bg">
    <div class="shell">

      <!-- TOP BAR -->
      <header id="topbar" aria-label="Barra superior">
        <button class="menu-pill" type="button" id="menuBtn">
          <span class="bars"><i></i></span>
          MENU
        </button>

        <div class="brand" aria-label="Marca">Masajes con Nury</div>

        <nav class="nav-links" aria-label="Navegación">
          <a href="#home" data-scroll="home">HOME</a>
          <a href="#servicios" data-scroll="servicios">SERVICIOS</a>
          <a href="#reservas" data-scroll="reservas">PAGES</a>
          <a href="#contacto" data-scroll="contacto">CONTACTO</a>
        </nav>

        <div class="top-actions">
          <button class="lang-pill" type="button" id="langToggle" aria-label="Cambiar idioma">
            <strong id="langLeft">ES</strong><span>/</span><strong id="langRight">EN</strong>
          </button>
          <button class="book-btn" type="button" data-scroll-btn="reservas" id="bookNowBtn">Book Now</button>
        </div>
      </header>

      <!-- HERO -->
      <section class="hero" id="home">
        <div class="container">
          <div class="hero-grid">
            <div class="hero-left">
              <h1 data-i18n="hero_title">Masajes con<br>Nury</h1>
              <p data-i18n="hero_sub">
                Reserva tu cita en segundos. Masajes relajantes, descontracturantes y deportivos con un enfoque profesional y personalizado.
              </p>

              <div class="hero-ctas">
                <button class="btn dark" type="button" data-scroll-btn="reservas" data-i18n="cta_appointment">Appointment</button>
                <button class="btn" type="button" id="letsTalkBtn" data-i18n="cta_lets_talk">Let’s talk</button>
              </div>
            </div>

            <div class="hero-right" aria-label="Foto principal">
              <svg class="sparkle" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M12 1l1.3 6.1L19 9l-5.7 1.9L12 17l-1.3-6.1L5 9l5.7-1.9L12 1z" fill="#0b0b10" opacity=".55"/>
              </svg>

              <!-- FOTO HERO: cambia src por tu imagen -->
              <div class="photo-blob">
                <img src="assets/hero.jpg" alt="Masajes con Nury - Sala de masaje">
              </div>
            </div>
          </div>
        </div>

        <!-- Marquee -->
        <div class="marquee-wrap" aria-hidden="true">
          <div class="marquee">
            <span data-i18n="marquee_1">Enjoyment — Your Relaxation Starts Here</span>
            <span class="star">✦</span>
            <span data-i18n="marquee_2">Enjoy 50% Off Your First Treatment</span>
            <span class="star">✦</span>
            <span data-i18n="marquee_1_dup">Enjoyment — Your Relaxation Starts Here</span>
            <span class="star">✦</span>
            <span data-i18n="marquee_2_dup">Enjoy 50% Off Your First Treatment</span>
          </div>
        </div>
      </section>

      <main class="container">
        <!-- SERVICIOS -->
        <section class="section" id="servicios">
          <h2 data-i18n="services_title">Servicios</h2>
          <p class="lead" data-i18n="services_lead">Elige el tipo de masaje y reserva directamente en el calendario.</p>

          <div class="grid">
            <div class="card">
              <h3 data-i18n="s1_title">Relajante</h3>
              <p data-i18n="s1_desc">Para estrés, descanso y tensión general. Ideal para desconectar.</p>
              <span class="tag" data-i18n="s1_tag">60 min · 50€</span>
            </div>
            <div class="card">
              <h3 data-i18n="s2_title">Descontracturante</h3>
              <p data-i18n="s2_desc">Enfoque muscular: espalda, cuello, piernas. Presión adaptada.</p>
              <span class="tag" data-i18n="s2_tag">75 min · 65€</span>
            </div>
            <div class="card">
              <h3 data-i18n="s3_title">Deportivo</h3>
              <p data-i18n="s3_desc">Preparación y recuperación para actividad física.</p>
              <span class="tag" data-i18n="s3_tag">90 min · 80€</span>
            </div>
            <div class="card">
              <h3 data-i18n="s4_title">Piedras calientes</h3>
              <p data-i18n="s4_desc">Calor terapéutico + aromaterapia para soltar tensión.</p>
              <span class="tag" data-i18n="s4_tag">75 min · 75€</span>
            </div>
            <div class="card">
              <h3 data-i18n="s5_title">Facial</h3>
              <p data-i18n="s5_desc">Masaje suave + drenaje para rostro y tensión mandibular.</p>
              <span class="tag" data-i18n="s5_tag">45 min · 45€</span>
            </div>
            <div class="card">
              <h3 data-i18n="s6_title">Prenatal</h3>
              <p data-i18n="s6_desc">Adaptado para embarazo (según caso) y bienestar general.</p>
              <span class="tag" data-i18n="s6_tag">60 min · 55€</span>
            </div>
          </div>
        </section>

        <!-- RESERVAS -->
        <section class="section" id="reservas">
          <h2 data-i18n="booking_title">Reservas (Calendario)</h2>
          <p class="lead" data-i18n="booking_lead">
            Selecciona un día y un horario. Los horarios reservados quedan bloqueados.
          </p>

          <div class="booking-wrap">
            <div class="calendar" aria-label="Calendario">
              <div class="cal-top">
                <div class="cal-title" id="calTitle">Mes Año</div>
                <div class="cal-nav">
                  <button class="cal-btn" id="prevMonth" type="button" aria-label="Mes anterior">‹</button>
                  <button class="cal-btn" id="nextMonth" type="button" aria-label="Mes siguiente">›</button>
                </div>
              </div>

              <div class="cal-grid" id="dowRow">
                <div class="dow" data-i18n="dow_1">L</div><div class="dow" data-i18n="dow_2">M</div><div class="dow" data-i18n="dow_3">X</div><div class="dow" data-i18n="dow_4">J</div><div class="dow" data-i18n="dow_5">V</div><div class="dow" data-i18n="dow_6">S</div><div class="dow" data-i18n="dow_7">D</div>
              </div>
              <div class="cal-grid" id="calGrid"></div>

              <p class="hint" style="margin-top:10px;" data-i18n="booking_hint">
                • Días pasados se desactivan · • Punto rosa = hay reserva ese día
              </p>
            </div>

            <div class="booking-panel" aria-label="Formulario de reserva">
              <div style="font-weight:1000; margin-bottom:6px;" data-i18n="your_appt">Tu cita</div>
              <div class="hint" id="selectedDayHint" data-i18n="pick_day">Elige un día en el calendario.</div>

              <div class="field">
                <label data-i18n="service_label">Servicio *</label>
                <select id="serviceSelect">
                  <option value="" data-i18n="service_pick">Selecciona…</option>
                  <option value="relajante">Relajante (60 min) — 50€</option>
                  <option value="descontracturante">Descontracturante (75 min) — 65€</option>
                  <option value="deportivo">Deportivo (90 min) — 80€</option>
                  <option value="piedras">Piedras (75 min) — 75€</option>
                  <option value="facial">Facial (45 min) — 45€</option>
                  <option value="prenatal">Prenatal (60 min) — 55€</option>
                </select>
              </div>

              <div class="field">
                <label data-i18n="time_label">Horario *</label>
                <div class="slots" id="slots"></div>
                <div class="hint" id="slotHint" data-i18n="slot_hint">Selecciona primero día + servicio para ver horarios.</div>
              </div>

              <div class="field">
                <label data-i18n="name_label">Nombre *</label>
                <input id="nameInput" placeholder="Tu nombre" />
              </div>
              <div class="field">
                <label data-i18n="email_label">Email *</label>
                <input id="emailInput" type="email" placeholder="tu@email.com" />
              </div>
              <div class="field">
                <label data-i18n="phone_label">Teléfono *</label>
                <input id="phoneInput" placeholder="+34 600 000 000" />
              </div>
              <div class="field">
                <label data-i18n="notes_label">Notas (opcional)</label>
                <textarea id="notesInput" data-i18n-ph="notes_ph" placeholder="Zonas a tratar, preferencias, lesiones, etc."></textarea>
              </div>

              <button class="btn dark" id="confirmBtn" type="button" style="width:100%; padding:12px 14px; border-radius:16px;" data-i18n="confirm_btn">
                Confirmar reserva
              </button>

              <div class="error" id="errorBox"></div>
              <div class="alert" id="okBox" data-i18n="ok_demo">✅ Reserva guardada (demo).</div>

              <p class="hint" style="margin-top:12px;" data-i18n="privacy_hint">
                Al reservar, aceptas la Política de Privacidad. Puedes revisar cookies y políticas en el pie de página.
              </p>
            </div>
          </div>
        </section>

        <!-- GALERÍA -->
        <section class="section" id="galeria">
          <h2 data-i18n="gallery_title">Galería</h2>
          <p class="lead" data-i18n="gallery_lead">Espacios para fotos o videos reales del negocio.</p>

          <div class="gallery">
            <div class="ph">VIDEO PRINCIPAL<br><span class="small">(mp4 / YouTube embed)</span></div>
            <div class="ph small">FOTO 1</div>
            <div class="ph small">FOTO 2</div>
            <div class="ph small">FOTO 3</div>
            <div class="ph small">FOTO 4</div>
            <div class="ph small">FOTO 5</div>
          </div>

          <footer id="contacto">
            <div>© <span id="year"></span> Masajes con Nury</div>
            <div>
              <a href="#" class="link" id="openCookiesLink" data-i18n="cookies_link">Cookies</a> ·
              <a href="#" class="link" id="openPrivacyLink" data-i18n="privacy_link">Privacidad</a> ·
              <a href="#" class="link" id="openLegalLink" data-i18n="legal_link">Aviso legal</a>
            </div>
          </footer>
        </section>
      </main>
    </div>
  </div>

  <!-- SIDE MENU -->
  <div class="sheet" id="sheet" aria-hidden="true">
    <div class="sheet-panel" role="dialog" aria-label="Menú">
      <div class="sheet-head">
        <div class="sheet-title">Masajes con Nury</div>
        <button class="xbtn" type="button" id="closeSheet" aria-label="Cerrar">✕</button>
      </div>

      <a href="#home" data-scroll="home" data-i18n="m_home">Home</a>
      <a href="#servicios" data-scroll="servicios" data-i18n="m_services">Servicios</a>
      <a href="#reservas" data-scroll="reservas" data-i18n="m_booking">Reservas</a>
      <a href="#galeria" data-scroll="galeria" data-i18n="m_gallery">Galería</a>
      <a href="#contacto" data-scroll="contacto" data-i18n="m_contact">Contacto</a>

      <div class="sheet-actions">
        <button class="btn dark" type="button" data-scroll-btn="reservas" data-i18n="m_book">Book Now</button>
        <button class="btn" type="button" id="sheetWhatsApp" data-i18n="m_whatsapp">WhatsApp</button>
      </div>

      <p class="hint" style="margin-top:12px;" data-i18n="sheet_hint">
        Tip: En móvil, arriba solo verás MENU + ES/EN (como pediste).
      </p>
    </div>
  </div>

  <!-- COOKIE BANNER -->
  <div class="cookie-banner" id="cookieBanner" aria-live="polite">
    <div class="cookie-card">
      <p data-i18n="cookie_text">
        Usamos cookies esenciales para que la web funcione y (opcionalmente) cookies analíticas para mejorar la experiencia.
        Puedes aceptar, rechazar o configurar.
      </p>
      <div class="cookie-actions">
        <button class="btn" type="button" id="cookieSettingsBtn" data-i18n="cookie_settings">Configurar</button>
        <button class="btn" type="button" id="cookieRejectBtn" data-i18n="cookie_reject">Rechazar</button>
        <button class="btn dark" type="button" id="cookieAcceptBtn" data-i18n="cookie_accept">Aceptar</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Policies -->
  <div class="modal" id="policyModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-label="Políticas">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Políticas</div>
        <button class="xbtn" type="button" id="closeModal" aria-label="Cerrar">✕</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
    // ===== Helpers =====
    const $ = (s)=>document.querySelector(s);
    const $$ = (s)=>document.querySelectorAll(s);
    const yearEl = $("#year");
    if(yearEl) yearEl.textContent = new Date().getFullYear();

    function scrollToId(id){
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('[data-scroll]');
      if(a){
        e.preventDefault();
        scrollToId(a.getAttribute('data-scroll'));
      }
      const b = e.target.closest('[data-scroll-btn]');
      if(b){
        e.preventDefault();
        scrollToId(b.getAttribute('data-scroll-btn'));
      }
    });

    // ===== Side menu open/close =====
    const sheet = $("#sheet");
    const menuBtn = $("#menuBtn");
    const closeSheet = $("#closeSheet");

    function openSheet(){ sheet.classList.add('show'); sheet.setAttribute("aria-hidden","false"); }
    function closeSheetFn(){ sheet.classList.remove('show'); sheet.setAttribute("aria-hidden","true"); }

    menuBtn?.addEventListener('click', openSheet);
    closeSheet?.addEventListener('click', closeSheetFn);
    sheet?.addEventListener('click', (e)=>{ if(e.target === sheet) closeSheetFn(); });
    document.addEventListener('click', (e)=>{
      if(e.target.closest('.sheet-panel a') || e.target.closest('.sheet-panel [data-scroll-btn]')) closeSheetFn();
    });

    // ===== WhatsApp & Let’s talk =====
    const WA_NUMBER = "34600000000"; // <-- CAMBIA ESTE NÚMERO
    $("#letsTalkBtn")?.addEventListener('click', ()=> window.open(`https://wa.me/${WA_NUMBER}`, "_blank"));
    $("#sheetWhatsApp")?.addEventListener('click', ()=> window.open(`https://wa.me/${WA_NUMBER}`, "_blank"));

    // ===== Language (ES/EN) =====
    const langToggle = $("#langToggle");
    const langLeft = $("#langLeft");
    const langRight = $("#langRight");

    const dict = {
      es: {
        hero_title:"Masajes con<br>Nury",
        hero_sub:"Reserva tu cita en segundos. Masajes relajantes, descontracturantes y deportivos con un enfoque profesional y personalizado.",
        cta_appointment:"Appointment",
        cta_lets_talk:"Let’s talk",
        marquee_1:"Enjoyment — Your Relaxation Starts Here",
        marquee_2:"Enjoy 50% Off Your First Treatment",
        marquee_1_dup:"Enjoyment — Your Relaxation Starts Here",
        marquee_2_dup:"Enjoy 50% Off Your First Treatment",

        services_title:"Servicios",
        services_lead:"Elige el tipo de masaje y reserva directamente en el calendario.",
        s1_title:"Relajante", s1_desc:"Para estrés, descanso y tensión general. Ideal para desconectar.", s1_tag:"60 min · 50€",
        s2_title:"Descontracturante", s2_desc:"Enfoque muscular: espalda, cuello, piernas. Presión adaptada.", s2_tag:"75 min · 65€",
        s3_title:"Deportivo", s3_desc:"Preparación y recuperación para actividad física.", s3_tag:"90 min · 80€",
        s4_title:"Piedras calientes", s4_desc:"Calor terapéutico + aromaterapia para soltar tensión.", s4_tag:"75 min · 75€",
        s5_title:"Facial", s5_desc:"Masaje suave + drenaje para rostro y tensión mandibular.", s5_tag:"45 min · 45€",
        s6_title:"Prenatal", s6_desc:"Adaptado para embarazo (según caso) y bienestar general.", s6_tag:"60 min · 55€",

        booking_title:"Reservas (Calendario)",
        booking_lead:"Selecciona un día y un horario. Los horarios reservados quedan bloqueados.",
        booking_hint:"• Días pasados se desactivan · • Punto rosa = hay reserva ese día",
        your_appt:"Tu cita",
        pick_day:"Elige un día en el calendario.",
        service_label:"Servicio *",
        service_pick:"Selecciona…",
        time_label:"Horario *",
        slot_hint:"Selecciona primero día + servicio para ver horarios.",
        name_label:"Nombre *",
        email_label:"Email *",
        phone_label:"Teléfono *",
        notes_label:"Notas (opcional)",
        notes_ph:"Zonas a tratar, preferencias, lesiones, etc.",
        confirm_btn:"Confirmar reserva",
        ok_demo:"✅ Reserva guardada (demo).",
        privacy_hint:"Al reservar, aceptas la Política de Privacidad. Puedes revisar cookies y políticas en el pie de página.",

        gallery_title:"Galería",
        gallery_lead:"Espacios para fotos o videos reales del negocio.",
        cookies_link:"Cookies",
        privacy_link:"Privacidad",
        legal_link:"Aviso legal",

        m_home:"Home",
        m_services:"Servicios",
        m_booking:"Reservas",
        m_gallery:"Galería",
        m_contact:"Contacto",
        m_book:"Book Now",
        m_whatsapp:"WhatsApp",
        sheet_hint:"Tip: En móvil, arriba solo verás MENU + ES/EN (como pediste).",

        dow_1:"L", dow_2:"M", dow_3:"X", dow_4:"J", dow_5:"V", dow_6:"S", dow_7:"D",

        cookie_text:"Usamos cookies esenciales para que la web funcione y (opcionalmente) cookies analíticas para mejorar la experiencia. Puedes aceptar, rechazar o configurar.",
        cookie_settings:"Configurar",
        cookie_reject:"Rechazar",
        cookie_accept:"Aceptar"
      },
      en: {
        hero_title:"Massages with<br>Nury",
        hero_sub:"Book your appointment in seconds. Relaxing, deep tissue and sports massages with a professional and personalized approach.",
        cta_appointment:"Appointment",
        cta_lets_talk:"Let’s talk",
        marquee_1:"Enjoyment — Your Relaxation Starts Here",
        marquee_2:"Enjoy 50% Off Your First Treatment",
        marquee_1_dup:"Enjoyment — Your Relaxation Starts Here",
        marquee_2_dup:"Enjoy 50% Off Your First Treatment",

        services_title:"Services",
        services_lead:"Choose your massage and book directly on the calendar.",
        s1_title:"Relaxing", s1_desc:"For stress relief and overall tension. Perfect to unwind.", s1_tag:"60 min · €50",
        s2_title:"Deep Tissue", s2_desc:"Muscle-focused: back, neck, legs. Adjustable pressure.", s2_tag:"75 min · €65",
        s3_title:"Sports", s3_desc:"Preparation and recovery for physical activity.", s3_tag:"90 min · €80",
        s4_title:"Hot Stones", s4_desc:"Therapeutic heat + aromatherapy to release tension.", s4_tag:"75 min · €75",
        s5_title:"Facial", s5_desc:"Gentle massage + drainage for face and jaw tension.", s5_tag:"45 min · €45",
        s6_title:"Prenatal", s6_desc:"Tailored for pregnancy (case-by-case) and wellbeing.", s6_tag:"60 min · €55",

        booking_title:"Booking (Calendar)",
        booking_lead:"Select a day and a time. Booked slots are blocked.",
        booking_hint:"• Past days are disabled · • Pink dot = booking on that day",
        your_appt:"Your appointment",
        pick_day:"Pick a day on the calendar.",
        service_label:"Service *",
        service_pick:"Select…",
        time_label:"Time *",
        slot_hint:"Pick day + service first to see available times.",
        name_label:"Name *",
        email_label:"Email *",
        phone_label:"Phone *",
        notes_label:"Notes (optional)",
        notes_ph:"Areas to treat, preferences, injuries, etc.",
        confirm_btn:"Confirm booking",
        ok_demo:"✅ Booking saved (demo).",
        privacy_hint:"By booking, you accept the Privacy Policy. Review cookies and policies in the footer.",

        gallery_title:"Gallery",
        gallery_lead:"Placeholders for real photos or videos from the business.",
        cookies_link:"Cookies",
        privacy_link:"Privacy",
        legal_link:"Legal notice",

        m_home:"Home",
        m_services:"Services",
        m_booking:"Booking",
        m_gallery:"Gallery",
        m_contact:"Contact",
        m_book:"Book Now",
        m_whatsapp:"WhatsApp",
        sheet_hint:"Tip: On mobile, the top bar shows only MENU + ES/EN (as requested).",

        dow_1:"M", dow_2:"T", dow_3:"W", dow_4:"T", dow_5:"F", dow_6:"S", dow_7:"S",

        cookie_text:"We use essential cookies for the website to function and (optionally) analytics cookies to improve your experience. You can accept, reject or configure.",
        cookie_settings:"Settings",
        cookie_reject:"Reject",
        cookie_accept:"Accept"
      }
    };

    function applyLang(lang){
      const d = dict[lang];
      document.documentElement.lang = lang === "es" ? "es" : "en";

      // Visual toggle emphasis
      if(langLeft && langRight){
        if(lang === "es"){ langLeft.style.opacity = "1"; langRight.style.opacity = ".55"; }
        else{ langLeft.style.opacity = ".55"; langRight.style.opacity = "1"; }
      }

      // data-i18n
      $$("[data-i18n]").forEach(el=>{
        const key = el.getAttribute("data-i18n");
        if(d[key] !== undefined) el.innerHTML = d[key];
      });
      // placeholders
      $$("[data-i18n-ph]").forEach(el=>{
        const key = el.getAttribute("data-i18n-ph");
        if(d[key] !== undefined) el.setAttribute("placeholder", d[key]);
      });

      // Update month name in calendar
      renderCalendar();
      buildSlots();
      localStorage.setItem("nury_lang", lang);
    }

    const savedLang = localStorage.getItem("nury_lang") || "es";
    applyLang(savedLang);

    langToggle?.addEventListener("click", ()=>{
      const current = localStorage.getItem("nury_lang") || "es";
      applyLang(current === "es" ? "en" : "es");
    });

    // ===== Policies (ES) =====
    const policyModal = $("#policyModal");
    const modalTitle = $("#modalTitle");
    const modalBody = $("#modalBody");
    const closeModal = $("#closeModal");

    function openModal(title, html){
      modalTitle.textContent = title;
      modalBody.innerHTML = html;
      policyModal.classList.add("show");
      policyModal.setAttribute("aria-hidden","false");
    }
    function closeModalFn(){
      policyModal.classList.remove("show");
      policyModal.setAttribute("aria-hidden","true");
    }
    closeModal?.addEventListener("click", closeModalFn);
    policyModal?.addEventListener("click", (e)=>{ if(e.target === policyModal) closeModalFn(); });

    const cookiesES = `
      <p class="small"><strong>Última actualización:</strong> ${new Date().toISOString().slice(0,10)}</p>
      <h3>1. ¿Qué son las cookies?</h3>
      <p>Las cookies son pequeños archivos que se almacenan en tu dispositivo cuando visitas una web. Sirven para garantizar el funcionamiento, recordar preferencias o medir el uso del sitio.</p>

      <h3>2. Tipos de cookies que usamos</h3>
      <ul>
        <li><strong>Esenciales (siempre activas):</strong> necesarias para que la web funcione (por ejemplo, guardar tu elección de idioma o el estado del banner).</li>
        <li><strong>Analíticas (opcionales):</strong> para entender el uso del sitio y mejorar la experiencia. (En esta demo no instalamos analíticas externas.)</li>
      </ul>

      <h3>3. ¿Cómo puedes gestionar las cookies?</h3>
      <p>Puedes aceptar, rechazar o configurar desde el banner. También puedes borrar cookies desde la configuración de tu navegador.</p>

      <h3>4. Responsable</h3>
      <p><strong>Masajes con Nury</strong> — Completa aquí los datos del responsable (nombre/empresa, NIF, dirección, email).</p>
    `;

    const privacyES = `
      <p class="small"><strong>Última actualización:</strong> ${new Date().toISOString().slice(0,10)}</p>
      <h3>1. Responsable del tratamiento</h3>
      <p><strong>Masajes con Nury</strong> (completa datos: titular, NIF, domicilio, email).</p>

      <h3>2. Datos que recopilamos</h3>
      <ul>
        <li>Datos de contacto: nombre, email, teléfono.</li>
        <li>Datos de reserva: fecha, hora, servicio y notas.</li>
      </ul>

      <h3>3. Finalidad</h3>
      <p>Gestionar tu solicitud de cita, comunicación y coordinación del servicio.</p>

      <h3>4. Base legal</h3>
      <p>Ejecución de medidas precontractuales/contrato (gestionar la cita) y consentimiento para comunicaciones cuando aplique.</p>

      <h3>5. Conservación</h3>
      <p>Conservaremos los datos el tiempo necesario para la gestión de la cita y los plazos legales aplicables.</p>

      <h3>6. Destinatarios</h3>
      <p>No cedemos datos a terceros salvo obligación legal. Si integras herramientas externas (Google Calendar, email marketing, analítica), debes listarlas aquí.</p>

      <h3>7. Derechos</h3>
      <p>Puedes ejercer acceso, rectificación, supresión, oposición, limitación y portabilidad escribiendo a <strong>tu-email@dominio.com</strong>. También puedes reclamar ante la AEPD.</p>

      <h3>8. Medidas de seguridad</h3>
      <p>Adoptamos medidas técnicas y organizativas razonables para proteger los datos.</p>

      <p class="small"><em>Nota:</em> en esta web las reservas se guardan en tu navegador (localStorage) como demo. Para producción real (España), lo normal es enviarlas a un servidor/correo/CRM y documentar proveedores.</p>
    `;

    const legalES = `
      <p class="small"><strong>Última actualización:</strong> ${new Date().toISOString().slice(0,10)}</p>
      <h3>1. Identificación</h3>
      <p>En cumplimiento de la LSSI-CE, se informa que el titular de este sitio es <strong>Masajes con Nury</strong>. Completa aquí: nombre/razón social, NIF, domicilio, email de contacto.</p>

      <h3>2. Objeto</h3>
      <p>Este sitio ofrece información sobre servicios de masaje y permite solicitar/gestionar citas.</p>

      <h3>3. Propiedad intelectual</h3>
      <p>Los contenidos, textos e imágenes son propiedad del titular o se usan con licencia. Queda prohibida su reproducción sin autorización.</p>

      <h3>4. Responsabilidad</h3>
      <p>El titular no se hace responsable de un mal uso del sitio ni de daños derivados de terceros o enlaces externos.</p>

      <h3>5. Legislación aplicable</h3>
      <p>La relación se rige por la normativa española. Para cualquier conflicto, se someterá a los juzgados y tribunales competentes según normativa aplicable.</p>
    `;

    $("#openCookiesLink")?.addEventListener("click", (e)=>{ e.preventDefault(); openModal("Política de Cookies", cookiesES); });
    $("#openPrivacyLink")?.addEventListener("click", (e)=>{ e.preventDefault(); openModal("Política de Privacidad", privacyES); });
    $("#openLegalLink")?.addEventListener("click", (e)=>{ e.preventDefault(); openModal("Aviso legal", legalES); });

    // ===== Cookies banner logic (simple, compliant-style UI) =====
    const cookieBanner = $("#cookieBanner");
    const cookieAcceptBtn = $("#cookieAcceptBtn");
    const cookieRejectBtn = $("#cookieRejectBtn");
    const cookieSettingsBtn = $("#cookieSettingsBtn");

    function showCookiesIfNeeded(){
      const saved = localStorage.getItem("nury_cookie_consent");
      if(!saved){
        cookieBanner.classList.add("show");
      }
    }
    function setConsent(value){
      localStorage.setItem("nury_cookie_consent", value); // "accepted" | "rejected" | "custom"
      cookieBanner.classList.remove("show");
    }
    cookieAcceptBtn?.addEventListener("click", ()=> setConsent("accepted"));
    cookieRejectBtn?.addEventListener("click", ()=> setConsent("rejected"));
    cookieSettingsBtn?.addEventListener("click", ()=>{
      // En esta versión simple, "configurar" abre la política (y guardamos custom)
      setConsent("custom");
      openModal("Política de Cookies", cookiesES);
    });

    showCookiesIfNeeded();

    // ===== Calendar Booking (localStorage demo) =====
    const calTitle = $("#calTitle");
    const calGrid  = $("#calGrid");
    const prevMonthBtn = $("#prevMonth");
    const nextMonthBtn = $("#nextMonth");

    const serviceSelect = $("#serviceSelect");
    const slotsWrap = $("#slots");
    const slotHint = $("#slotHint");

    const nameInput = $("#nameInput");
    const emailInput = $("#emailInput");
    const phoneInput = $("#phoneInput");
    const notesInput = $("#notesInput");

    const confirmBtn = $("#confirmBtn");
    const errorBox = $("#errorBox");
    const okBox = $("#okBox");
    const selectedDayHint = $("#selectedDayHint");

    const services = {
      relajante: { nameES:"Relajante", nameEN:"Relaxing", duration:60, price:"50€" },
      descontracturante: { nameES:"Descontracturante", nameEN:"Deep Tissue", duration:75, price:"65€" },
      deportivo: { nameES:"Deportivo", nameEN:"Sports", duration:90, price:"80€" },
      piedras: { nameES:"Piedras", nameEN:"Hot Stones", duration:75, price:"75€" },
      facial: { nameES:"Facial", nameEN:"Facial", duration:45, price:"45€" },
      prenatal: { nameES:"Prenatal", nameEN:"Prenatal", duration:60, price:"55€" },
    };

    const OPEN = 9;
    const CLOSE = 19;
    const STEP = 30;

    const pad = (n)=> String(n).padStart(2,'0');
    const fmtDate = (d)=> `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
    const fmtTime = (m)=>{
      const h = Math.floor(m/60);
      const mm = m%60;
      return `${pad(h)}:${pad(mm)}`;
    };

    function getBookings(){
      try{ return JSON.parse(localStorage.getItem('nury_bookings') || '[]'); }
      catch{ return []; }
    }
    function saveBooking(b){
      const all = getBookings();
      all.push(b);
      localStorage.setItem('nury_bookings', JSON.stringify(all));
    }
    function hasBookingOnDate(dateStr){
      return getBookings().some(b=> b.date === dateStr);
    }
    function isSlotBooked(dateStr, timeStr){
      return getBookings().some(b=> b.date === dateStr && b.time === timeStr);
    }

    let view = new Date();
    view.setDate(1);

    let selectedDateStr = "";
    let selectedTimeStr = "";

    function monthNameES(m){
      return ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][m];
    }
    function monthNameEN(m){
      return ["January","February","March","April","May","June","July","August","September","October","November","December"][m];
    }

    function renderCalendar(){
      if(!calGrid || !calTitle) return;

      calGrid.innerHTML = "";
      const y = view.getFullYear();
      const m = view.getMonth();

      const lang = localStorage.getItem("nury_lang") || "es";
      calTitle.textContent = lang === "es" ? `${monthNameES(m)} ${y}` : `${monthNameEN(m)} ${y}`;

      const first = new Date(y, m, 1);
      const last  = new Date(y, m+1, 0);

      const jsDow = first.getDay();           // 0 Sun..6 Sat
      const mondayIndex = (jsDow + 6) % 7;    // 0 Mon..6 Sun

      for(let i=0;i<mondayIndex;i++){
        const empty = document.createElement('div');
        empty.className = "day muted";
        empty.style.visibility = "hidden";
        calGrid.appendChild(empty);
      }

      const today = new Date();
      const todayStr = fmtDate(today);

      for(let d=1; d<=last.getDate(); d++){
        const dateObj = new Date(y, m, d);
        const dateStr = fmtDate(dateObj);

        const btn = document.createElement('div');
        btn.className = "day";
        btn.textContent = d;

        if(hasBookingOnDate(dateStr)) btn.classList.add('has-booking');

        const dot = document.createElement('span');
        dot.className = "dot";
        btn.appendChild(dot);

        if(dateStr < todayStr){
          btn.classList.add('muted');
        } else {
          btn.addEventListener('click', ()=>{
            selectedDateStr = dateStr;
            selectedTimeStr = "";
            document.querySelectorAll('.day.selected').forEach(x=>x.classList.remove('selected'));
            btn.classList.add('selected');

            const lang = localStorage.getItem("nury_lang") || "es";
            selectedDayHint.textContent = lang === "es" ? `Día seleccionado: ${dateStr}` : `Selected day: ${dateStr}`;

            buildSlots();
            okBox.classList.remove('show');
            errorBox.classList.remove('show');
          });
        }

        if(dateStr === selectedDateStr){
          btn.classList.add('selected');
        }

        calGrid.appendChild(btn);
      }
    }

    function buildSlots(){
      if(!slotsWrap) return;
      slotsWrap.innerHTML = "";
      selectedTimeStr = "";

      const lang = localStorage.getItem("nury_lang") || "es";

      if(!selectedDateStr || !serviceSelect.value){
        slotHint.textContent = lang === "es"
          ? "Selecciona primero día + servicio para ver horarios."
          : "Pick day + service first to see available times.";
        return;
      }

      slotHint.textContent = lang === "es" ? "Selecciona un horario." : "Select a time.";

      const svc = services[serviceSelect.value];
      const start = OPEN*60;
      const end = CLOSE*60;
      const lastStart = end - svc.duration;

      for(let t=start; t<=lastStart; t+=STEP){
        const time = fmtTime(t);
        const b = document.createElement('button');
        b.type = "button";
        b.className = "slot";
        b.textContent = time;

        if(isSlotBooked(selectedDateStr, time)){
          b.disabled = true;
        } else {
          b.addEventListener('click', ()=>{
            document.querySelectorAll('.slot.selected').forEach(x=>x.classList.remove('selected'));
            b.classList.add('selected');
            selectedTimeStr = time;
            slotHint.textContent = lang === "es" ? `Horario seleccionado: ${time}` : `Selected time: ${time}`;
            okBox.classList.remove('show');
            errorBox.classList.remove('show');
          });
        }
        slotsWrap.appendChild(b);
      }
    }

    serviceSelect?.addEventListener('change', ()=>{
      okBox.classList.remove('show');
      errorBox.classList.remove('show');
      buildSlots();
    });

    prevMonthBtn?.addEventListener('click', ()=>{
      view = new Date(view.getFullYear(), view.getMonth()-1, 1);
      renderCalendar();
    });
    nextMonthBtn?.addEventListener('click', ()=>{
      view = new Date(view.getFullYear(), view.getMonth()+1, 1);
      renderCalendar();
    });

    confirmBtn?.addEventListener('click', ()=>{
      okBox.classList.remove('show');
      errorBox.classList.remove('show');

      const lang = localStorage.getItem("nury_lang") || "es";

      const name = nameInput.value.trim();
      const email = emailInput.value.trim();
      const phone = phoneInput.value.trim();
      const notes = notesInput.value.trim();
      const serviceKey = serviceSelect.value;

      const err = (msg)=>{ errorBox.textContent = msg; errorBox.classList.add('show'); };

      if(!selectedDateStr){
        return err(lang === "es" ? "Elige un día en el calendario." : "Pick a day on the calendar.");
      }
      if(!serviceKey){
        return err(lang === "es" ? "Selecciona un servicio." : "Select a service.");
      }
      if(!selectedTimeStr){
        return err(lang === "es" ? "Selecciona un horario." : "Select a time.");
      }
      if(!name || !email || !phone){
        return err(lang === "es" ? "Completa nombre, email y teléfono." : "Fill name, email and phone.");
      }
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        return err(lang === "es" ? "Email inválido." : "Invalid email.");
      }
      if(isSlotBooked(selectedDateStr, selectedTimeStr)){
        err(lang === "es" ? "Ese horario ya fue reservado. Elige otro." : "That time is already booked. Choose another.");
        buildSlots();
        return;
      }

      const svc = services[serviceKey];
      const serviceName = lang === "es" ? svc.nameES : svc.nameEN;

      saveBooking({
        id: (crypto?.randomUUID ? crypto.randomUUID() : String(Date.now())),
        createdAt: new Date().toISOString(),
        date: selectedDateStr,
        time: selectedTimeStr,
        service: serviceName,
        duration: svc.duration,
        price: svc.price,
        name, email, phone, notes
      });

      okBox.classList.add('show');

      nameInput.value = "";
      emailInput.value = "";
      phoneInput.value = "";
      notesInput.value = "";

      renderCalendar();
      buildSlots();
    });

    // Initial render
    renderCalendar();
    buildSlots();

    // ===== Cookie banner links (open policies) =====
    $("#openCookiesLink")?.addEventListener("click", (e)=>{ e.preventDefault(); openModal("Política de Cookies", cookiesES); });
    $("#openPrivacyLink")?.addEventListener("click", (e)=>{ e.preventDefault(); openModal("Política de Privacidad", privacyES); });
    $("#openLegalLink")?.addEventListener("click", (e)=>{ e.preventDefault(); openModal("Aviso legal", legalES); });
  </script>
</body>
</html>

